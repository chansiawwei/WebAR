<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">

  <title>The AR Business Card</title>
  <meta name="description" content="AR.js Business Card">
  <meta name="author" content="Utkarsh Gupta">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.0/aframe/build/aframe-ar.js"></script>

  <script>
    AFRAME.registerComponent('navigate-on-click', {
      schema: {
        url: { default: '' }
      },
      init: function () {
        var data = this.data;
        var el = this.el;
        el.addEventListener('click', function () {
          window.open("https://www.w3schools.com", '_blank');
        });
      }
    });


    AFRAME.registerComponent('mappoint-handler', {

      init: function () {
        //console.log("I was triggered");
        // const marker3 = document.querySelector("#marker3");
        const imgMap = document.querySelector("#img-map");

        imgMap.addEventListener('click', function (ev, target) {
          const intersectedElement = ev && ev.detail && ev.detail.intersectedEl;
          if (imgMap && intersectedElement === imgMap) {
            document.location.href = "https://goo.gl/maps/gRsth6SHo5AgwMbT7";
          }
        });
      }
    });

    AFRAME.registerComponent('clickhandler', {
        init: function() {
            this.el.addEventListener('click', () => {
              alert('Clicked')
              });
    }});
  </script>
</head>

<body style='margin : 0px; overflow: hidden;'>
  <a-scene embeddedarjs='trackingMethod: best; debugUIEnabled: false;' vr-mode-ui="enabled: false" ar-template>

    <a-assets>
      <img id="github_icon"
        src="https://cdn3.iconfinder.com/data/icons/social-media-2169/24/social_media_social_media_logo_github-512.png">
      <img id="insta_icon"
        src="https://cdn3.iconfinder.com/data/icons/social-media-2169/24/social_media_social_media_logo_instagram-512.png">
      <img id="linkedin_icon"
        src="https://cdn3.iconfinder.com/data/icons/social-media-2169/24/social_media_social_media_logo_likedin-512.png">
      <img id="facebook_icon"
        src="https://cdn3.iconfinder.com/data/icons/social-media-2169/24/social_media_social_media_logo_facebook-512.png">
      <video id="video" autoplay loop="true" src="https://www.youtube.com/watch?v=668nUCeBHyY"></video>
    </a-assets>

    <a-plane rotation="-90 0 0" color="#3199f9" opacity="0.95"
      navigate-on-click="url: https://www.linkedin.com/in/utkarshgpta/">
      <a-image src="https://s.gravatar.com/avatar/78156753f9d8feaebe2418780bdc262b?s=250"></a-image>
      <a-text align="center"
        value="Hello, World!\nThis is a Virtual business card.\nMade by using AR.JS and A FRAME \nFind below the links to various platforms.\P.S.Exhibits random behaviour when opening links."
        color="black" width="1" z-offset="0.1"></a-text>
    </a-plane>

    <a-plane position="0 0 0.8" color="transparent" opacity="0" width="2" height="0.3" rotation="-90 0 0">
      <a-box src="#github_icon" position="-0.4 0 0" depth="0.15" height="0.15" width="0.15"
        navigate-on-click="url: http://github.com/chansiawwei" emitevents="true" cursor="rayOrigin: mouse">
        <a-animation attribute="rotation" dur="7000" to="0 360 0" easing="linear" repeat="indefinite"></a-animation>
      </a-box>
      <a-box src="#insta_icon" position="0 0 0" depth="0.15" height="0.15" width="0.15"
        navigate-on-click="url: http://instagram.com/" emitevents="true" cursor="rayOrigin: mouse">
        <a-animation attribute="rotation" dur="7000" to="0 360 0" easing="linear" repeat="indefinite"></a-animation>
      </a-box>
      <a-box src="#linkedin_icon" position="0.4 0 0" depth="0.15" height="0.15" width="0.15"
      navigate-on-click="url: http://instagram.com/" emitevents="true" cursor="rayOrigin: mouse">
        <a-animation attribute="rotation" dur="7000" to="0 360 0" easing="linear" repeat="indefinite"></a-animation>
      </a-box>
      <a-box src="#facebook_icon" position="0.8 0 0" depth="0.15" height="0.15" width="0.15"
      navigate-on-click="url: http://instagram.com/" emitevents="true" cursor="rayOrigin: mouse">
        <a-animation attribute="rotation" dur="7000" to="0 360 0" easing="linear" repeat="indefinite"></a-animation>
      </a-box>
    </a-plane>

    <a-plane position="1.2 0 0" width="1" height="1" rotation="-90 0 0" opcatity="1"  clickhandler>
      <a-image src="./assets/image.jpg"></a-image>
    </a-plane>
    <a-plane position="-1.2 0 0" width="1" height="1" rotation="-90 0 0" opcatity="1">
      <a-video src="#video"></a-video>
    </a-plane>
    <a-plane id="img-map" material='transparent:true;src:#map-point' position="0 0 -1.2" width="1" height="1"
      rotation="-90 0 0" opcatity="1">
    </a-plane>

    <a-entity id="camera" cursor="rayOrigin: mouse"></a-entity>
    <a-marker-camera preset='hiro'></a-marker-camera>
  </a-scene>
</body>

</html>